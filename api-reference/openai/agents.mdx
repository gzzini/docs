---
title: "Agents"
api: "POST https://sac-waffle-v2.theo-110.workers.dev/openai/agent/{agentName}"
description: "Chat usando agentes pr√©-configurados ou customizados"
---

## Descri√ß√£o

Agentes s√£o configura√ß√µes pr√©-definidas de modelo, system prompt e tools para tarefas espec√≠ficas. Eles simplificam o uso da API para casos de uso comuns.

## Endpoints Dispon√≠veis

### 1. Usar Agente Existente

`POST /openai/agent/{agentName}`

Executa chat usando um agente pr√©-configurado.

#### Path Parameters

<ParamField path="agentName" type="string" required>
  Nome do agente a usar
  
  **Agentes pr√©-configurados:**
  - `support-assistant` - Suporte ao cliente
  - `analytics-assistant` - An√°lise de dados
</ParamField>

#### Body Parameters

<ParamField body="prompt" type="string" required>
  Mensagem para o agente processar
</ParamField>

### 2. Registrar Novo Agente

`POST /openai/agents`

Cria um novo agente com configura√ß√£o customizada.

#### Body Parameters

<ParamField body="name" type="string" required>
  Nome √∫nico do agente
  
  **Regras:**
  - Sem espa√ßos
  - Letras, n√∫meros e h√≠fens
  - M√°ximo 50 caracteres
</ParamField>

<ParamField body="systemPrompt" type="string" required>
  Instru√ß√µes do sistema para o agente
  
  **Dicas:**
  - Seja espec√≠fico sobre o comportamento
  - Defina tom e estilo
  - Inclua conhecimento do dom√≠nio
</ParamField>

<ParamField body="description" type="string">
  Descri√ß√£o do prop√≥sito do agente
</ParamField>

<ParamField body="model" type="string" default="gpt-4o-mini">
  Modelo GPT a usar
</ParamField>

<ParamField body="temperature" type="number" default="0.7">
  Temperatura para respostas (0.0 a 2.0)
</ParamField>

<ParamField body="maxTokens" type="number" default="4096">
  Limite m√°ximo de tokens
</ParamField>

<ParamField body="tools" type="array">
  Lista de tools dispon√≠veis para o agente
  
  **Exemplo:**
  ```json
  ["get_current_date", "format_json"]
  ```
</ParamField>

### 3. Listar Recursos Dispon√≠veis

`GET /openai/resources`

Lista todos os agentes e tools dispon√≠veis.

## Response

<ResponseField name="success" type="boolean" required>
  Status da opera√ß√£o
</ResponseField>

<ResponseField name="data" type="object">
  <Expandable title="Dados da resposta">
    <ResponseField name="agent" type="string">
      Nome do agente usado (quando aplic√°vel)
    </ResponseField>
    
    <ResponseField name="content" type="string">
      Resposta gerada pelo agente
    </ResponseField>
    
    <ResponseField name="toolResults" type="array">
      Resultados de tools executadas
    </ResponseField>
    
    <ResponseField name="usage" type="object">
      Estat√≠sticas de uso de tokens
    </ResponseField>
    
    <ResponseField name="finishReason" type="string">
      Motivo do t√©rmino
    </ResponseField>
  </Expandable>
</ResponseField>

## Agentes Pr√©-configurados

### support-assistant

**Prop√≥sito:** Assistente de suporte ao cliente do Waffle Group

**Caracter√≠sticas:**
- Tom casual e amig√°vel
- Conhecimento sobre newsletters
- Responde em portugu√™s brasileiro
- Evita emojis excessivos

**System Prompt:**
```
Voc√™ √© um assistente de suporte do Waffle Group, empresa respons√°vel 
pelas newsletters The News, The Bizness, The Champs, entre outras.

Diretrizes:
- Seja amig√°vel, informativo e acess√≠vel
- Use linguagem casual mas profissional
- Prefira letras min√∫sculas para manter o tom casual da marca
- Evite emojis excessivos
- Responda sempre em portugu√™s brasileiro
```

### analytics-assistant

**Prop√≥sito:** An√°lise de m√©tricas e dados

**Caracter√≠sticas:**
- Foco em insights acion√°veis
- Visualiza√ß√£o de dados
- An√°lise estat√≠stica
- Recomenda√ß√µes baseadas em dados

<RequestExample>

```bash Usar Support Assistant
curl -X POST https://sac-waffle-v2.theo-110.workers.dev/openai/agent/support-assistant \
  -H "Authorization: Bearer seu_token_jwt" \
  -H "Content-Type: application/json" \
  -d '{
    "prompt": "Como funciona o programa de indica√ß√µes?"
  }'
```

```bash Usar Analytics Assistant
curl -X POST https://sac-waffle-v2.theo-110.workers.dev/openai/agent/analytics-assistant \
  -H "Authorization: Bearer seu_token_jwt" \
  -H "Content-Type: application/json" \
  -d '{
    "prompt": "Analise estes dados de engajamento: Opens 45%, Clicks 12%, Unsub 0.5%"
  }'
```

```bash Registrar Novo Agente
curl -X POST https://sac-waffle-v2.theo-110.workers.dev/openai/agents \
  -H "Authorization: Bearer seu_token_jwt" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "content-writer",
    "description": "Escritor de conte√∫do para newsletters",
    "systemPrompt": "Voc√™ √© um escritor especializado em newsletters. Crie conte√∫do envolvente, conciso e informativo. Use t√≠tulos chamativos e par√°grafos curtos.",
    "model": "gpt-4o-mini",
    "temperature": 0.8,
    "maxTokens": 2000
  }'
```

```bash Listar Recursos
curl -X GET https://sac-waffle-v2.theo-110.workers.dev/openai/resources \
  -H "Authorization: Bearer seu_token_jwt"
```

</RequestExample>

<ResponseExample>

```json Support Assistant Response
{
  "success": true,
  "data": {
    "agent": "support-assistant",
    "content": "ol√°! o programa de indica√ß√µes do waffle √© super simples e vantajoso!\n\nfunciona assim:\n\n1. voc√™ compartilha seu link √∫nico de indica√ß√£o com amigos\n2. quando eles se inscrevem usando seu link, voc√™s dois ganham benef√≠cios\n3. voc√™ acumula pontos que podem ser trocados por pr√™mios exclusivos\n4. seus amigos ganham desconto ou per√≠odo gr√°tis inicial\n\ncada newsletter tem suas pr√≥prias recompensas, mas geralmente incluem:\n- meses gr√°tis de assinatura\n- produtos exclusivos da marca\n- acesso antecipado a conte√∫dos\n\nvoc√™ pode acompanhar suas indica√ß√µes e pontos direto no seu painel. quanto mais amigos voc√™ indica, mais benef√≠cios acumula!\n\nquer come√ßar a indicar? posso te ajudar a encontrar seu link!",
    "toolResults": [],
    "usage": {
      "promptTokens": 142,
      "completionTokens": 198,
      "totalTokens": 340
    },
    "finishReason": "stop"
  }
}
```

```json Analytics Assistant Response
{
  "success": true,
  "data": {
    "agent": "analytics-assistant",
    "content": "## An√°lise de Engajamento\n\n### M√©tricas Atuais\n- **Taxa de Abertura:** 45% ‚úÖ EXCELENTE\n- **Taxa de Cliques:** 12% ‚úÖ MUITO BOM\n- **Taxa de Descadastro:** 0.5% ‚úÖ SAUD√ÅVEL\n\n### Insights\n\n1. **Performance Geral:** Suas m√©tricas est√£o acima da m√©dia da ind√∫stria\n   - Benchmark abertura: 20-25%\n   - Benchmark cliques: 2-5%\n   - Benchmark unsub: 0.5-1%\n\n2. **CTR (Click-to-Open):** 26.7%\n   - Indica excelente relev√¢ncia do conte√∫do\n   - Seus assinantes que abrem est√£o altamente engajados\n\n3. **Sa√∫de da Lista:** √ìtima\n   - Baixo unsubscribe indica satisfa√ß√£o\n   - Propor√ß√£o saud√°vel entre engajamento e reten√ß√£o\n\n### Recomenda√ß√µes\n\n1. **Mantenha:** Continue com a estrat√©gia atual de conte√∫do\n2. **Teste A/B:** Experimente diferentes CTAs para aumentar cliques\n3. **Segmenta√ß√£o:** Considere criar grupos baseados em engajamento\n4. **Reativa√ß√£o:** Foque nos 55% que n√£o abrem com campanhas especiais",
    "toolResults": [],
    "usage": {
      "promptTokens": 168,
      "completionTokens": 342,
      "totalTokens": 510
    },
    "finishReason": "stop"
  }
}
```

```json Novo Agente Registrado
{
  "success": true,
  "message": "Agente 'content-writer' registrado com sucesso",
  "data": {
    "name": "content-writer",
    "description": "Escritor de conte√∫do para newsletters",
    "model": "gpt-4o-mini"
  }
}
```

```json Lista de Recursos
{
  "success": true,
  "data": {
    "agents": [
      "support-assistant",
      "analytics-assistant",
      "content-writer"
    ],
    "tools": [
      "get_current_date",
      "format_json"
    ]
  }
}
```

```json Erro - Agente N√£o Encontrado
{
  "success": false,
  "error": "Agente 'sales-bot' n√£o encontrado",
  "availableAgents": [
    "support-assistant",
    "analytics-assistant"
  ]
}
```

</ResponseExample>

## Criando Agentes Eficazes

### üéØ Defina Prop√≥sito Claro
```json
{
  "name": "email-composer",
  "systemPrompt": "Voc√™ √© um especialista em escrever emails de resposta para suporte..."
}
```

### üå°Ô∏è Ajuste Temperatura
- **0.0-0.3**: Tarefas factuais, respostas consistentes
- **0.4-0.7**: Balanceado, uso geral
- **0.8-1.5**: Criativo, gera√ß√£o de conte√∫do

### üîß Inclua Tools Relevantes
```json
{
  "name": "report-generator",
  "tools": ["get_current_date", "format_json"],
  "systemPrompt": "Gere relat√≥rios estruturados..."
}
```

### üìù System Prompt Eficaz
```
Voc√™ √© [PAPEL/FUN√á√ÉO].

Conhecimento:
- [INFORMA√á√ïES DO DOM√çNIO]
- [CONTEXTO NECESS√ÅRIO]

Diretrizes:
- [REGRA 1]
- [REGRA 2]

Tom e Estilo:
- [COMO COMUNICAR]
- [O QUE EVITAR]
```

## Casos de Uso

### üìß Suporte ao Cliente
```json
{
  "agent": "support-assistant",
  "prompt": "Cliente reclamando de cobran√ßa duplicada"
}
```

### üìä An√°lise de Dados
```json
{
  "agent": "analytics-assistant",
  "prompt": "Compare performance desta semana vs semana passada"
}
```

### ‚úçÔ∏è Gera√ß√£o de Conte√∫do
```json
{
  "agent": "content-writer",
  "prompt": "Escreva introdu√ß√£o para newsletter sobre tecnologia"
}
```

## Melhores Pr√°ticas

1. **Nomes descritivos**: Use nomes que indicam a fun√ß√£o
2. **System prompts detalhados**: Quanto mais espec√≠fico, melhor
3. **Temperature apropriada**: Ajuste conforme o caso de uso
4. **Teste antes de produzir**: Valide comportamento do agente
5. **Versionamento**: Mantenha hist√≥rico de mudan√ßas em agentes